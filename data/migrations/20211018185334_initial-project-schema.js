exports.up = async function(knex) {
    await knex.schema
      .createTable('users', tbl => {
          tbl.increments('user_id')
          tbl.string('username')
              .unique()
              .notNullable()
          tbl.string('email')
              .unique()
              .notNullable()
          tbl.string('password')
              .notNullable()
      })
      .createTable('potluck', tbl => {
          tbl.increments('potluck_id')
          tbl.string('potluck_name')
              .notNullable()
          tbl.date('date') // expect (mm-dd-yyyy)
              .notNullable()
          tbl.time('time') // expect (hh:mm:ss)
              .notNullable()
          tbl.string('location')
              .notNullable()
      })
      .createTable('userPotluck', tbl => {
          tbl.increments('id')
          tbl.integer('user_id')
              .notNullable()
              .unsigned()
              .references('user_id')
              .inTable('users')
          tbl.integer('potluck_id')
              .notNullable()
              .unsigned()
              .references('potluck_id')
              .inTable('potluck')
          tbl.string('role')
          tbl.boolean('attending')
      })
      .createTable('potluckItem', tbl => {
          tbl.increments('item_id')
          tbl.integer('potluck_id')
              .notNullable()
              .unsigned()
              .references('potluck_id')
              .inTable('potluck')
          tbl.string('item')
              .notNullable()
          tbl.boolean('fulfilled')
      })
      .createTable('userItem', tbl => {
          tbl.increments('id')
          tbl.integer('user_id')
              .notNullable()
              .unsigned()
              .references('user_id')
              .inTable('users')
          tbl.integer('potluck_id')
              .notNullable()
              .unsigned()
              .references('potluck_id')
              .inTable('potluck')
          tbl.integer('item_id')
              .notNullable()
              .unsigned()
              .references('item_id')
              .inTable('potluckItem')
      })
  };
  
  exports.down = async function(knex) {
    await knex.schema
      .dropTableIfExists('userItem')
      .dropTableIfExists('potluckItem')
      .dropTableIfExists('userPotluck')
      .dropTableIfExists('potluck')
      .dropTableIfExists('users')
  };